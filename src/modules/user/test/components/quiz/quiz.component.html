<div fxFill *ngIf="test" fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="1em">
    <div fxLayout="row" fxLayoutAlign="space-between center">
        <h3 *ngIf="question">Question {{ question.questionNum }}: </h3>
        <mat-icon class="info-tooltip" [tooltip]="getInfoTooltip(question)" [options]="{placement: 'left'}">info</mat-icon>
    </div>
    <mat-divider></mat-divider>
    <div class="question-container">
        <app-question
            *ngIf="question"
            [action]="action"
            [question]="question"
        ></app-question>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between center" fxLayoutGap="1em" *ngIf="question && action === 'attempt'">
        <div class="question-action-buttons" fxFill fxLayout="row wrap" fxLayoutAlign="space-between center">
            <button mat-raised-button color="lime" [disabled]="!question.userAnswer" (click)="saveAndNext()"> 
                {{ isLastQuestion() ? 'Save' : 'Save & Next' }}
            </button>
            <button mat-raised-button color="accent" [disabled]="!question.userAnswer" (click)="saveAndMarkForReviewAndNext()"> 
                {{ isLastQuestion() ? 'Save & Mark for review' : 'Save, Mark for review & Next' }}
            </button>
            <button mat-raised-button color="primary" (click)="markForReviewAndNext()">
                {{ isLastQuestion() ? 'Mark for review' : 'Mark for review & Next' }}
            </button>
            <button mat-raised-button [disabled]="!question.userAnswer" (click)="clearResponse()">
                Clear Response
            </button>
        </div>
        <div fxFill fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1em">
            <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1em">
                <button mat-raised-button color="" *ngIf="question.questionNum !== 1 " (click)="prevQuestion()">
                    <mat-icon>skip_previous</mat-icon>
                    Previous
                </button>
                <button mat-raised-button color="" *ngIf="question.questionNum !== test.questionCount" (click)="nextQuestion()">
                    Next
                    <mat-icon>skip_next</mat-icon>
                </button>
            </div>
            <button mat-raised-button color="lime" (click)="finishTest()">
                <mat-icon>done_outline</mat-icon>
                Submit Test
            </button>
        </div>
    </div>
    <div fxLayout="column" fxLayoutAlign="space-between center" fxLayoutGap="1em" *ngIf="question && action === 'view'">
        <div fxFill fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1em">
            <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="1em">
                <button mat-raised-button color="" *ngIf="question.questionNum !== 1 " (click)="viewPrevQuestion()">
                    <mat-icon>skip_previous</mat-icon>
                    Previous
                </button>
                <!-- <button mat-raised-button color="" (click)="showAnswer()">
                    <mat-icon>done</mat-icon>
                    View Answer
                </button> -->
                <button mat-raised-button color="" *ngIf="question.questionNum !== test.questionCount" (click)="viewNextQuestion()">
                    Next
                    <mat-icon>skip_next</mat-icon>
                </button>
            </div>
        </div>
        <div class="answer-block" fxFill fxLayout="column" fxLayoutAlign="space-between start" fxLayoutGap="1em" *ngIf="question && action=== 'view'">
            <span>Ans. ({{question.answer}})</span>
            <span *ngIf="!question.answerDescription">Stay in touch for answer description</span>
            <app-statement
                fxFill
                *ngIf="question.answerDescription"
                [imagePath]="question.imagePath"
                [statement]="question.answerDescription"
            ></app-statement>
        </div>
    </div>
</div>